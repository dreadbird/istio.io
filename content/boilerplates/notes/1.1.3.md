## Bug fixes and small enhancements

- Istio-specific backports of Envoy patches for [`CVE-2019-9900`](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9900) and [`CVE-2019-9901`](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9901) included in Istio 1.1.2 have been dropped in favor of an [Envoy update](https://github.com/envoyproxy/envoy/commit/ac7aa5ac8a815e5277b4d4659c5c02145fa1d56f) which contains the final version of the patches.    This replaces back-ports that were made privately in compliance with the Envoy embargo with equivalents that are public and that can be audited.
- [Fix load balancer weight setting for split horizon `EDS` (](https://github.com/istio/istio/commit/27e1b980aa17dee6968083568ec2b0d3cb5d0b69)[PR 12560](https://github.com/istio/istio/pull/12560)[)](https://github.com/istio/istio/commit/27e1b980aa17dee6968083568ec2b0d3cb5d0b69)
- [Fix typo in default Envoy `JSON` log format (](https://github.com/istio/istio/commit/fd639acdd336da0b15dc8dec48654d330220443e)[Issue 12232](https://github.com/istio/istio/issues/12232)[)](https://github.com/istio/istio/commit/fd639acdd336da0b15dc8dec48654d330220443e)
- [Clarify mesh connect timeout fields (](https://github.com/istio/istio/commit/350f77127c31ed3a81b8979b43a39287a4d4326b)[Issue 11319](https://github.com/istio/istio/issues/11319)[)](https://github.com/istio/istio/commit/350f77127c31ed3a81b8979b43a39287a4d4326b)
- [Refresh `oop handler` with connection configuration update (](https://github.com/istio/istio/commit/52b4b97b8eb6dd4d1c3df80a8abb2548a6780c5f)[Issue 12488](https://github.com/istio/istio/issues/12488)[)](https://github.com/istio/istio/commit/52b4b97b8eb6dd4d1c3df80a8abb2548a6780c5f)
- [Hide `ServiceAccounts` from `PushContext` log to reduce log spam (](https://github.com/istio/istio/commit/cb25f887528882769337a7c4221e4122f8d2197c)[PR 12702](https://github.com/istio/istio/pull/12702)[)](https://github.com/istio/istio/commit/cb25f887528882769337a7c4221e4122f8d2197c)
- [Configure `localityLbSetting` in `values.yaml` by passing it through to the mesh configuration (](https://github.com/istio/istio/commit/de0a6b712755e2b926964de75837e66f34102d26)[PR 12683](https://github.com/istio/istio/pull/12683)[)](https://github.com/istio/istio/commit/de0a6b712755e2b926964de75837e66f34102d26)
- [Restore Kiali settings that were accidentally deleted. (](https://github.com/istio/istio/commit/0145ed7309c0854b39ab04b68298010b624ab9ab)[Issue 3660)](https://github.com/istio/istio/issues/3660)
- [Remove the soon-to-be deprecated `critical-pod` annotation from Helm charts. (](https://github.com/istio/istio/commit/b1cad5fb592a6100de35d5c1bd599b2ac9a75485)[Issue 12650](https://github.com/istio/istio/issues/12650)[)](https://github.com/istio/istio/commit/b1cad5fb592a6100de35d5c1bd599b2ac9a75485)
- [Support pod anti-affinity annotations to improve control plane availability. (](https://github.com/istio/istio/commit/a7150e49d6229581b5c2e50d8fa3dd67401b6ecc)[Issue 11333](https://github.com/istio/istio/issues/11333)[)](https://github.com/istio/istio/commit/a7150e49d6229581b5c2e50d8fa3dd67401b6ecc) 
- [Pretty print `IP` addresses in access logs (](https://github.com/istio/istio/commit/ba047dc9474a10e63304b74a26787812606223ff)[PR 12502)](https://github.com/istio/istio/pull/12502)
- [Remove redundant write header to further reduce log spam (](https://github.com/istio/istio/commit/fedfd4750ffbe96e90378a257e9e414f4201adef)[PR 12731](https://github.com/istio/istio/pull/12731)[)](https://github.com/istio/istio/commit/fedfd4750ffbe96e90378a257e9e414f4201adef) 
- [Improve destination host validation in Pilot (](https://github.com/istio/istio/commit/e6b39fefdb24eb78f4be7c0e7929b5c02cf3af8c)[PR 12804](https://github.com/istio/istio/pull/12804)[)](https://github.com/istio/istio/commit/e6b39fefdb24eb78f4be7c0e7929b5c02cf3af8c)
- [Explicitly configure `istio-init` to run as root so use of pod-level `securityContext.runAsUser` doesn't break it (](https://github.com/istio/istio/commit/bf0ae4940797e0db9ab1f0adddfa82046afa5ed3)[Issue 5453](https://github.com/istio/istio/issues/5453)[)](https://github.com/istio/istio/commit/bf0ae4940797e0db9ab1f0adddfa82046afa5ed3)
- [Add configuration samples for Vault integration (](https://github.com/istio/istio/commit/03ec4b4f91c10986bbde8c20b8934e33498dac93)[PR 12917)](https://github.com/istio/istio/pull/12917)
- [Prevent services with same target port resulting in duplicate inbound listeners. (](https://github.com/istio/istio/commit/7531ca17b366b516cbd0d34ffa89db3d00a90d27)[Issue 9504](https://github.com/istio/istio/issues/9504)[)](https://github.com/istio/istio/commit/7531ca17b366b516cbd0d34ffa89db3d00a90d27)
- [Respect locality load balancing weight settings from `ServiceEntry`(](https://github.com/istio/istio/commit/c97638912468009bbccc102e8ace92f4b2dd5d19)[PR 12714](https://github.com/istio/istio/pull/12714)[)](https://github.com/istio/istio/commit/c97638912468009bbccc102e8ace92f4b2dd5d19) 
- [Fix issue with configuring `Sidecar` `egress` ports for namespaces other than `istio-system` resulting in a `envoy.tcp_proxy` filter of `BlackHoleCluster` by auto binding to services for `Sidecar` listeners(](https://github.com/istio/istio/commit/67085adc665017a36b77ecf4ce583a32e7705cdf)[Issue 12536](https://github.com/istio/istio/issues/12536)[)](https://github.com/istio/istio/commit/67085adc665017a36b77ecf4ce583a32e7705cdf)
- [Fix gateway `vhost` configuration generation issue by favoring more specific host matches (](https://github.com/istio/istio/commit/78f5101f47e40a66c09c4ee82bb0b186aadf6f14)[Issue 12655](Issue https://github.com/istio/istio/issues/12655)[)](https://github.com/istio/istio/commit/78f5101f47e40a66c09c4ee82bb0b186aadf6f14) 
- [Fix `ALLOW_ANY` so it now allows external traffic if there is already a http service present on a port (](https://github.com/istio/istio/commit/3a4aa250d4f08b99a753c5b4ff230cf53e2ecfd7)[PR 12916](https://github.com/istio/istio/pull/12916)[)](https://github.com/istio/istio/commit/3a4aa250d4f08b99a753c5b4ff230cf53e2ecfd7) 
- [Make the TLS certificate location watched by Pilot Agent configurable (](https://github.com/istio/istio/commit/a788675c8cc25aa49a0c6aa80bbd49152b45045b)[Issue 11984](https://github.com/istio/istio/issues/11984)[)](https://github.com/istio/istio/commit/a788675c8cc25aa49a0c6aa80bbd49152b45045b)
- [Add support for Datadog tracing (](https://github.com/istio/istio/commit/d6aeaa4be18042f6da6063aff0f9806a3cdc192d)[PR 12687](https://github.com/istio/istio/pull/12687)[)](https://github.com/istio/istio/commit/d6aeaa4be18042f6da6063aff0f9806a3cdc192d) 
- [Fix validation logic so that port.name is no longer a valid PortSelection ([PR 13054](https://github.com/istio/istio/pull/13054)](https://github.com/istio/istio/commit/deefb3e765d8fec5b88a5048967eb9df55b584ae)
- [Add alias to `istioctl` so 'x' can be used instead of 'experimental' (](https://github.com/istio/istio/commit/7ff5b5e6b546ddb7db5250cf251780455336e4c4)[PR 11801](https://github.com/istio/istio/pull/11801)[)](https://github.com/istio/istio/commit/7ff5b5e6b546ddb7db5250cf251780455336e4c4)
- [Fix broken Datadog_golden configuration file (](https://github.com/istio/istio/commit/8f236ca094d58e4d8d798f82ab4788ac0e9ce87e)[Issue 13078](https://github.com/istio/istio/issues/13078)[)](https://github.com/istio/istio/commit/8f236ca094d58e4d8d798f82ab4788ac0e9ce87e)
- [Better distribute Sidecar mTLS certificate rotation by adding jitter to their CSR requests (](https://github.com/istio/istio/commit/cfec06710c0142e90e2d1af9d936406f7d8b330b)[PR 12805](https://github.com/istio/istio/pull/12805)[)](https://github.com/istio/istio/commit/cfec06710c0142e90e2d1af9d936406f7d8b330b)
- [Fix `istioctl proxy-config clusters` cluster type column rendering (](https://github.com/istio/istio/commit/c4b53d7924f4a15db826c0ef1bb1c083a051b6e4)[Issue 12455](https://github.com/istio/istio/issues/12455)[)](https://github.com/istio/istio/commit/c4b53d7924f4a15db826c0ef1bb1c083a051b6e4)
- [Fix SDS secret mount configuration. (](https://github.com/istio/istio/commit/41b831f443914c3dd97f1b761c2fb9afed29850e)[PR 12733](https://github.com/istio/istio/pull/12733)[)](https://github.com/istio/istio/commit/41b831f443914c3dd97f1b761c2fb9afed29850e)
- [Fix incorrect Istio version in the Helm charts (](https://github.com/istio/istio/commit/d7f1286834cf5d4e2f86dc2611cd2373ad192bf7)[PR 12762](https://github.com/istio/istio/pull/12762), [PR 13149](https://github.com/istio/istio/pull/13149)[)](https://github.com/istio/istio/commit/d7f1286834cf5d4e2f86dc2611cd2373ad192bf7)
- [Fix partial DNS failures in the presence of overlapping ports (](https://github.com/istio/istio/commit/497c85e7f4e0a0783991d015023a1393a60d4731)[Issue 11658](https://github.com/istio/istio/issues/11658)[)](https://github.com/istio/istio/commit/497c85e7f4e0a0783991d015023a1393a60d4731)
- [Allow weighted load balancing registry locality to be configured (](https://github.com/istio/istio/commit/7e813b47e2f35d8cf3a39a5972d8643b9bac8f33)[PR 13077](https://github.com/istio/istio/pull/13077)[)](https://github.com/istio/istio/commit/7e813b47e2f35d8cf3a39a5972d8643b9bac8f33)
- [Add support for standard CRDs for compiled-in Mixer adapters (](https://github.com/istio/istio/commit/25eedac3845b52a523234c74240a5e6ce91c462e)[PR 12815](https://github.com/istio/istio/pull/12815)[)](https://github.com/istio/istio/commit/25eedac3845b52a523234c74240a5e6ce91c462e)
- [Reduce Pilot resource requirements for demo configuration (](https://github.com/istio/istio/commit/4a2b0017721d4e0998a74712ac94757191c5f64f)[PR 12477](https://github.com/istio/istio/pull/12477)[)](https://github.com/istio/istio/commit/4a2b0017721d4e0998a74712ac94757191c5f64f)
- [Fully populate Galley dashboard by adding data source (](https://github.com/istio/istio/commit/aec5f8b9eaa52d75091e813df84c393bc50fbb93)[Issue 13040](https://github.com/istio/istio/issues/13040)[)](https://github.com/istio/istio/commit/aec5f8b9eaa52d75091e813df84c393bc50fbb93)
- [Fix Helm `podAntiAffinity` templating error (](https://github.com/istio/istio/commit/75b00d708b6319d20eb6669d76e2421455695967)[Issue 12790](https://github.com/istio/istio/issues/12790)[)](https://github.com/istio/istio/commit/75b00d708b6319d20eb6669d76e2421455695967)
- [Propagate 1.1.0 `sidecar` performance tuning to the `istio-gateway` (](https://github.com/istio/istio/commit/bfea6044ef93511bcdf5b26faf53c0e33a1da4f7)[PR 12315](https://github.com/istio/istio/pull/12315)[)](https://github.com/istio/istio/commit/bfea6044ef93511bcdf5b26faf53c0e33a1da4f7)
- [Improve destination host validation by rejecting `*` hosts (](https://github.com/istio/istio/commit/cccb01eb5f1cb1e769c6e19e79528f4bf0d8c1f4)[Issue 12794](https://github.com/istio/istio/issues/12794)[)](https://github.com/istio/istio/commit/cccb01eb5f1cb1e769c6e19e79528f4bf0d8c1f4)
- [Move Mixer samples to the `istio/istio` repo so automated test cases can be written for them in the future (](https://github.com/istio/istio/commit/c30c91c739617c6fdba4cd0ef846c51be3949439)[PR 13196](https://github.com/istio/istio/pull/13196)[)](https://github.com/istio/istio/commit/c30c91c739617c6fdba4cd0ef846c51be3949439)
- [Expose upstream `idle_timeout` in cluster definition so dead connections can sometimes be removed from connection pools before they are used, reducing 503s. (](https://github.com/istio/istio/commit/e961061885161a3235b0851cc5fb64f69a6779db)[Issue 9113](https://github.com/istio/istio/issues/9113)[)](https://github.com/istio/istio/commit/e961061885161a3235b0851cc5fb64f69a6779db)
- [Update expired test certificates that were breaking test cases (](https://github.com/istio/istio/commit/4b5666af2cf9c8eb78b071b7b4ea06daab782678)[PR 13234](https://github.com/istio/istio/pull/13234)[)](https://github.com/istio/istio/commit/4b5666af2cf9c8eb78b071b7b4ea06daab782678)
- [Fix bug with the original destination service discovery not using the original destination load balancer (](https://github.com/istio/istio/commit/cc09c8de63ce950906bd91c73085ecb474123e14)[PR 13242](https://github.com/istio/istio/pull/13242)[)](https://github.com/istio/istio/commit/cc09c8de63ce950906bd91c73085ecb474123e14)
- [When registering a `sidecar` resource to restrict what a Pod can see, the restrictions are now applied if the spec contains a `workloadSelector`. (](https://github.com/istio/istio/commit/3b3992b0ecf501fdc9724abcd30128b7823be77f)[Issue 11818](https://github.com/istio/istio/issues/11818)[)](https://github.com/istio/istio/commit/3b3992b0ecf501fdc9724abcd30128b7823be77f)
- [Update Bookinfo example to use port 80 for TLS origination (](https://github.com/istio/istio/commit/11787675d47b892462ee245f6b1869df090b4991)[PR 13206](https://github.com/istio/istio/pull/13206)[)](https://github.com/istio/istio/commit/11787675d47b892462ee245f6b1869df090b4991)
- [Fix SDS memory leak in the presence of invalid or missing keying materials (](https://github.com/istio/istio/commit/2a39a33f0b06d865e4df52a0594973baf6ada405)[Issue 13197](https://github.com/istio/istio/issues/13197)[)](https://github.com/istio/istio/commit/2a39a33f0b06d865e4df52a0594973baf6ada405)
- [Add liveness probe for Citadel (](https://github.com/istio/istio/commit/b5f104c79931a2b789a0338467e9044a488aa070)[PR 12734](https://github.com/istio/istio/pull/12734)[)](https://github.com/istio/istio/commit/b5f104c79931a2b789a0338467e9044a488aa070)
- [Improve AWS ELB interoperability by making 15020 the first port listed in the `ingressgateway` service (](https://github.com/istio/istio/commit/eda1935991e667f7609a07c616b143f0e5f51a42)[Issue 12502](https://github.com/istio/istio/issues/12503)[)](https://github.com/istio/istio/commit/eda1935991e667f7609a07c616b143f0e5f51a42)
- [Use outlier detection for failover mode but not for distribute mode for locality weighted load balancing (](https://github.com/istio/istio/commit/07da3bebff5268b150f180628a5314cfc37251a8)[Issues 12965](https://github.com/istio/istio/issues/12961)[)](https://github.com/istio/istio/commit/07da3bebff5268b150f180628a5314cfc37251a8)
- [Replace generation of Envoy's deprecated `enabled` field in `CorsPolicy` with the replacement `filter_enabled` field for 1.1.0+ sidecars only (](https://github.com/istio/istio/commit/b537eab247a8159f005891c59685f4d3c7c83811)[PR 13266](https://github.com/istio/istio/pull/13266)[)](https://github.com/istio/istio/commit/b537eab247a8159f005891c59685f4d3c7c83811)
- [Standardize labels on Mixer's Helm charts (](https://github.com/istio/istio/commit/b7a84b57cc3dc3975ee6ac3cf5bf7d11ac69127a)[PR 11788](https://github.com/istio/istio/pull/11788)[)](https://github.com/istio/istio/commit/b7a84b57cc3dc3975ee6ac3cf5bf7d11ac69127a)




